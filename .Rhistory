stringr::str_equal("UNIDADE DE REGIME FECHADO N1", "UNIDADE DE REGIME FECHADON1", locale ="pt")
install.packages("stringr")
install.packages("stringr")
stringr::str_equal("UNIDADE DE REGIME FECHADO N1", "UNIDADE DE REGIME FECHADON1", locale ="pt")
library(dplyr)
dados2<- dados2 %>%
mutate(
tempo_presidio_2000 = round(lubridate::time_length(lubridate::interval(lubridate::my("01-2000"), lubridate::dmy(data_inauguracao)), "years")),
tempo_presidio_2010 = round(lubridate::time_length(lubridate::interval(lubridate::my("01-2010"), lubridate::dmy(data_inauguracao)), "years")),
tempo_presidio_1990 = round(lubridate::time_length(lubridate::interval(lubridate::my("01-1990"), lubridate::dmy(data_inauguracao)), "years")),
presidio_2000 = if_else(dmy(data_inauguracao) >= ym("1-2000"), 1, 0),
presidio_2000 = if_else(dmy(data_inauguracao) >= ym("1-1990"), 1, 0),
presidio_2000 = if_else(dmy(data_inauguracao) >= ym("1-1980"), 1, 0),
presidio_federal = dplyr::if_else(ambito == " ", 1, 0),
presidio_estadual = dplyr::if_else(ambito == "Estadual", 1, 0),
presidio_municipal = dplyr::if_else(ambito == "Municipal", 1, 0),
presidio_masculino = dplyr::if_else(presidio_tipo == "Masculino", 1, 0),
)
setwd("~/projects/base-victor/")
library(tidyverse)
library(dplyr)
dados2 <- dados %>%
select(nome_do_estabelecimento, situacao_do_estabelecimento,
endereco, bairro, cep, ambito, uf, municipio, x1_1_estabelecimento_originalmente_destinado_a_pessoa_privadas_de_liberdade_do_sexo,
x1_6_data_de_inauguracao_do_estabelecimento) %>%
rename(presidio_tipo = x1_1_estabelecimento_originalmente_destinado_a_pessoa_privadas_de_liberdade_do_sexo,
data_inauguracao = x1_6_data_de_inauguracao_do_estabelecimento )
dados <- readr::read_delim("1o-ciclo-base-de-dados-2016-2-semestre.csv", delim = ";") %>% janitor::clean_names()
dados2 <- dados %>%
select(nome_do_estabelecimento, situacao_do_estabelecimento,
endereco, bairro, cep, ambito, uf, municipio, x1_1_estabelecimento_originalmente_destinado_a_pessoa_privadas_de_liberdade_do_sexo,
x1_6_data_de_inauguracao_do_estabelecimento) %>%
rename(presidio_tipo = x1_1_estabelecimento_originalmente_destinado_a_pessoa_privadas_de_liberdade_do_sexo,
data_inauguracao = x1_6_data_de_inauguracao_do_estabelecimento )
dados2<- dados2 %>%
mutate(
tempo_presidio_2000 = round(lubridate::time_length(lubridate::interval(lubridate::my("01-2000"), lubridate::dmy(data_inauguracao)), "years")),
tempo_presidio_2010 = round(lubridate::time_length(lubridate::interval(lubridate::my("01-2010"), lubridate::dmy(data_inauguracao)), "years")),
tempo_presidio_1990 = round(lubridate::time_length(lubridate::interval(lubridate::my("01-1990"), lubridate::dmy(data_inauguracao)), "years")),
presidio_2000 = if_else(dmy(data_inauguracao) >= ym("1-2000"), 1, 0),
presidio_2000 = if_else(dmy(data_inauguracao) >= ym("1-1990"), 1, 0),
presidio_2000 = if_else(dmy(data_inauguracao) >= ym("1-1980"), 1, 0),
presidio_federal = dplyr::if_else(ambito == " ", 1, 0),
presidio_estadual = dplyr::if_else(ambito == "Estadual", 1, 0),
presidio_municipal = dplyr::if_else(ambito == "Municipal", 1, 0),
presidio_masculino = dplyr::if_else(presidio_tipo == "Masculino", 1, 0),
)
library(lubridate)
dados2 <- dados %>%
select(nome_do_estabelecimento, situacao_do_estabelecimento,
endereco, bairro, cep, ambito, uf, municipio, x1_1_estabelecimento_originalmente_destinado_a_pessoa_privadas_de_liberdade_do_sexo,
x1_6_data_de_inauguracao_do_estabelecimento) %>%
rename(presidio_tipo = x1_1_estabelecimento_originalmente_destinado_a_pessoa_privadas_de_liberdade_do_sexo,
data_inauguracao = x1_6_data_de_inauguracao_do_estabelecimento )
dados2<- dados2 %>%
mutate(
tempo_presidio_2000 = round(lubridate::time_length(lubridate::interval(lubridate::my("01-2000"), lubridate::dmy(data_inauguracao)), "years")),
tempo_presidio_2010 = round(lubridate::time_length(lubridate::interval(lubridate::my("01-2010"), lubridate::dmy(data_inauguracao)), "years")),
tempo_presidio_1990 = round(lubridate::time_length(lubridate::interval(lubridate::my("01-1990"), lubridate::dmy(data_inauguracao)), "years")),
presidio_2000 = if_else(dmy(data_inauguracao) >= ym("1-2000"), 1, 0),
presidio_2000 = if_else(dmy(data_inauguracao) >= ym("1-1990"), 1, 0),
presidio_2000 = if_else(dmy(data_inauguracao) >= ym("1-1980"), 1, 0),
presidio_federal = dplyr::if_else(ambito == " ", 1, 0),
presidio_estadual = dplyr::if_else(ambito == "Estadual", 1, 0),
presidio_municipal = dplyr::if_else(ambito == "Municipal", 1, 0),
presidio_masculino = dplyr::if_else(presidio_tipo == "Masculino", 1, 0),
)
dados2<- dados2 %>%
mutate(
tempo_presidio_2000 = round(lubridate::time_length(lubridate::interval(lubridate::my("01-2000"), lubridate::dmy(data_inauguracao)), "years")),
tempo_presidio_2010 = round(lubridate::time_length(lubridate::interval(lubridate::my("01-2010"), lubridate::dmy(data_inauguracao)), "years")),
tempo_presidio_1990 = round(lubridate::time_length(lubridate::interval(lubridate::my("01-1990"), lubridate::dmy(data_inauguracao)), "years")),
presidio_2000 = if_else(dmy(data_inauguracao) >= ym("01-2000"), 1, 0),
presidio_2000 = if_else(dmy(data_inauguracao) >= ym("01-1990"), 1, 0),
presidio_2000 = if_else(dmy(data_inauguracao) >= ym("01-1980"), 1, 0),
presidio_federal = dplyr::if_else(ambito == " ", 1, 0),
presidio_estadual = dplyr::if_else(ambito == "Estadual", 1, 0),
presidio_municipal = dplyr::if_else(ambito == "Municipal", 1, 0),
presidio_masculino = dplyr::if_else(presidio_tipo == "Masculino", 1, 0),
)
dados2<- dados2 %>%
mutate(
tempo_presidio_2000 = round(lubridate::time_length(lubridate::interval(lubridate::my("01-2000"), lubridate::dmy(data_inauguracao)), "years")),
tempo_presidio_2010 = round(lubridate::time_length(lubridate::interval(lubridate::my("01-2010"), lubridate::dmy(data_inauguracao)), "years")),
tempo_presidio_1990 = round(lubridate::time_length(lubridate::interval(lubridate::my("01-1990"), lubridate::dmy(data_inauguracao)), "years")),
presidio_2000 = if_else(dmy(data_inauguracao) >= my("01-2000"), 1, 0),
presidio_2000 = if_else(dmy(data_inauguracao) >= my("01-1990"), 1, 0),
presidio_2000 = if_else(dmy(data_inauguracao) >= my("01-1980"), 1, 0),
presidio_federal = dplyr::if_else(ambito == " ", 1, 0),
presidio_estadual = dplyr::if_else(ambito == "Estadual", 1, 0),
presidio_municipal = dplyr::if_else(ambito == "Municipal", 1, 0),
presidio_masculino = dplyr::if_else(presidio_tipo == "Masculino", 1, 0),
)
View(dados2)
unidades_prisionais <- dados2 %>%
select(municipio) %>%
group_by() %>%
summarise(municipio, qnt = n())
View(unidades_prisionais)
unidades_prisionais <- dados2 %>%
select(municipio) %>%
group_by(municipio) %>%
summarise(qnt = n())
View(unidades_prisionais)
source("~/projects/base-victor/projeto.R")
install.packages("basedosdados")
install.packages("basedosdados")
library("basedosdados")
install.packages("rlang")
install.packages("rlang")
library("basedosdados")
install.packages("bigrquery")
install.packages("bigrquery")
library("basedosdados")
library("rlang")
